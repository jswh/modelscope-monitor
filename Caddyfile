{
  admin :2019
  log {
    output file /var/log/caddy/access.log
  }
}

# 监听所有接口的 HTTP 请求
http:// {
  # 基本认证（通过环境变量控制）
  basic_auth {
    allowenv ENABLE_AUTH
    username {$AUTH_USERNAME}
    password_hash {$AUTH_PASSWORD}
    hash bcrypt
  }

  # API 请求代理到后端
  handle /api/* {
    reverse_proxy localhost:8000
  }

  # 静态文件服务
  handle {
    root * /var/www/html
    file_server
    try_files {path} {path}/ /index.html
  }
}
